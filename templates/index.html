<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>RSI Monitor</title>
    <style>
        body { font-family: Arial; background: #f2f2f2; padding: 20px; }
        table { width: 80%; margin: auto; border-collapse: collapse; background: white; }
        th, td { padding: 10px; border: 1px solid #ccc; text-align: center; }
        th { background: #333; color: white; }
        .rsi-high { color: #ff4c4c; font-weight: bold; }  /* RSI Ø¨Ø§Ù„Ø§ */
        .rsi-low { color: #00bfff; font-weight: bold; }    /* RSI Ù¾Ø§ÛŒÛŒÙ† */
        .rsi-mid { color: #877d7d; }                      /* RSI Ù†Ø±Ù…Ø§Ù„ */

    </style>
<!-- <meta http-equiv="refresh" content="180"> -->

</head>
<body>
    <h2 style="text-align:center">ðŸ“Š RSI & Price Monitor</h2>
    <table>
        <tr>
            <th>Symbol</th>
            <th>Price</th>
            <th>RSI 1m</th>
            <th>RSI 5m</th>
            <th>RSI 15m</th>
            <th>RSI 1h</th>
            <th>RSI 4h</th>
            <th>score</th>
            <th>Time</th>
        </tr>
        {% for row in data %}
        <tr>
            <td><a href="/symbol/{{ row['symbol'] }}">{{ row["symbol"] }}</a></td>
            <td style="color: {{ 'green' if row['price_change'] > 0 else 'red' if row['price_change'] < 0 else 'gray' }}"> {{ row["price"] }}  ( {{ "%.4f"|format(row["price_change"]) }})</td>
            <td class="
            {% if row["rsi_1m"] < 30 %}rsi-low
            {% elif row["rsi_1m"] > 70 %}rsi-high
            {% else %}rsi-mid{% endif %}
        ">{{ row["rsi_1m"] }} - {{ row["rsi_trend_1m"] }}</td>
            <td class="
            {% if row["rsi_5m"] < 30 %}rsi-low
            {% elif row["rsi_5m"] > 70 %}rsi-high
            {% else %}rsi-mid{% endif %}
        ">{{ row["rsi_5m"] }} - {{row["rsi_trend_5m"]}}</td>
            <td class="
            {% if row["rsi_15m"] < 30 %}rsi-low
            {% elif row["rsi_15m"] > 70 %}rsi-high
            {% else %}rsi-mid{% endif %}
        ">{{ row["rsi_15m"] }} - {{row["rsi_trend_15m"]}}</td>
            <td class="
            {% if row["rsi_1h"] < 30 %}rsi-low
            {% elif row["rsi_1h"] > 70 %}rsi-high
            {% else %}rsi-mid{% endif %}
        ">{{ row["rsi_1h"] }} - {{row["rsi_trend_1h"]}}</td>
            <td class="
            {% if row["rsi_4h"] < 30 %}rsi-low
            {% elif row["rsi_4h"] > 70 %}rsi-high
            {% else %}rsi-mid{% endif %}
        ">{{ row["rsi_4h"] }} - {{row["rsi_trend_4h"]}}</td>
            <td  style="color: {% if row.score < 0%}red{% elif row.score > 0 %}green{% endif %}" > {{ row.score }} {% if row.score < 0%} (S){% elif row.score > 0 %} (L){% endif %}</td>
            <td style="background-color: {{ row.color }};" >{{ row["updated_at"] }} {{ row.status }}</td>
        </tr>
        {% endfor %}
    </table>
    <script>
        setTimeout(() => {
          window.location.reload();
        }, 60000); // Ù‡Ø± 3 Ø¯Ù‚ÛŒÙ‚Ù‡ = 180,000 Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡
      </script>
</body>
</html>
